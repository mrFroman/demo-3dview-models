{"ast":null,"code":"const protocol = window.location.protocol === 'https:' ? 'wss' : 'ws';\nconst messageSocket = new WebSocket(`${protocol}://${window.location.host}/message`);\nmessageSocket.onmessage = message => {\n  const data = JSON.parse(String(message.data));\n  switch (data.method) {\n    case 'sendDevCommand':\n      switch (data.params.name) {\n        case 'reload':\n          window.location.reload();\n          break;\n        case 'rsc-reload':\n          globalThis.__EXPO_RSC_RELOAD_LISTENERS__?.forEach(l => l());\n          break;\n        case 'module-import':\n          {\n            const {\n              data: moduleData\n            } = data.params;\n            const id = `expo-module-id=\"${moduleData.id}\"`;\n            const style = document.querySelector(`style[${id}]`);\n            document.querySelector(`script[${id}]`)?.remove();\n            const code = moduleData.code;\n            const script = document.createElement('script');\n            script.type = 'module';\n            script.text = code;\n            script.setAttribute('expo-module-id', moduleData.id);\n            document.head.appendChild(script);\n            if (style) {\n              queueMicrotask(() => style.parentElement?.removeChild(style));\n            }\n          }\n          break;\n      }\n      break;\n    case 'reload':\n      window.location.reload();\n      break;\n    case 'devMenu':\n      break;\n  }\n};","map":{"version":3,"names":["protocol","window","location","messageSocket","WebSocket","host","onmessage","message","data","JSON","parse","String","method","params","name","reload","globalThis","__EXPO_RSC_RELOAD_LISTENERS__","forEach","l","moduleData","id","style","document","querySelector","remove","code","script","createElement","type","text","setAttribute","head","appendChild","queueMicrotask","parentElement","removeChild"],"sources":["/app/node_modules/@expo/metro-runtime/src/messageSocket.ts"],"sourcesContent":["/* eslint-env browser */\n\n// Setup websocket messages for reloading the page from the command line.\n// This is normally setup on the native client.\n\nconst protocol = window.location.protocol === 'https:' ? 'wss' : 'ws';\nconst messageSocket = new WebSocket(`${protocol}://${window.location.host}/message`);\nmessageSocket.onmessage = (message) => {\n  const data = JSON.parse(String(message.data));\n  switch (data.method) {\n    case 'sendDevCommand':\n      switch (data.params.name) {\n        case 'reload':\n          window.location.reload();\n          break;\n        case 'rsc-reload':\n          globalThis.__EXPO_RSC_RELOAD_LISTENERS__?.forEach((l) => l());\n          break;\n        // Inject CSS modules from server components into the root client bundle in development.\n        case 'module-import':\n          {\n            const { data: moduleData } = data.params;\n            // remove element with the same 'expo-module-id'\n            const id = `expo-module-id=\"${moduleData.id}\"`;\n            const style = document.querySelector(`style[${id}]`);\n            document.querySelector(`script[${id}]`)?.remove();\n            const code = moduleData.code;\n            const script = document.createElement('script');\n            script.type = 'module';\n            script.text = code;\n            script.setAttribute('expo-module-id', moduleData.id);\n            document.head.appendChild(script);\n            if (style) {\n              // remove the previous block after the new one is loaded to mitigate FOUC.\n              queueMicrotask(() => style.parentElement?.removeChild(style));\n            }\n          }\n          break;\n      }\n      break;\n    case 'reload':\n      window.location.reload();\n      break;\n    case 'devMenu':\n      // no-op\n      break;\n  }\n};\n"],"mappings":"AAKA,MAAMA,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ,KAAK,QAAQ,GAAG,KAAK,GAAG,IAAI;AACrE,MAAMG,aAAa,GAAG,IAAIC,SAAS,CAAC,GAAGJ,QAAQ,MAAMC,MAAM,CAACC,QAAQ,CAACG,IAAI,UAAU,CAAC;AACpFF,aAAa,CAACG,SAAS,GAAIC,OAAO,IAAK;EACrC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,MAAM,CAACJ,OAAO,CAACC,IAAI,CAAC,CAAC;EAC7C,QAAQA,IAAI,CAACI,MAAM;IACjB,KAAK,gBAAgB;MACnB,QAAQJ,IAAI,CAACK,MAAM,CAACC,IAAI;QACtB,KAAK,QAAQ;UACXb,MAAM,CAACC,QAAQ,CAACa,MAAM,CAAC,CAAC;UACxB;QACF,KAAK,YAAY;UACfC,UAAU,CAACC,6BAA6B,EAAEC,OAAO,CAAEC,CAAC,IAAKA,CAAC,CAAC,CAAC,CAAC;UAC7D;QAEF,KAAK,eAAe;UAClB;YACE,MAAM;cAAEX,IAAI,EAAEY;YAAW,CAAC,GAAGZ,IAAI,CAACK,MAAM;YAExC,MAAMQ,EAAE,GAAG,mBAAmBD,UAAU,CAACC,EAAE,GAAG;YAC9C,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,SAASH,EAAE,GAAG,CAAC;YACpDE,QAAQ,CAACC,aAAa,CAAC,UAAUH,EAAE,GAAG,CAAC,EAAEI,MAAM,CAAC,CAAC;YACjD,MAAMC,IAAI,GAAGN,UAAU,CAACM,IAAI;YAC5B,MAAMC,MAAM,GAAGJ,QAAQ,CAACK,aAAa,CAAC,QAAQ,CAAC;YAC/CD,MAAM,CAACE,IAAI,GAAG,QAAQ;YACtBF,MAAM,CAACG,IAAI,GAAGJ,IAAI;YAClBC,MAAM,CAACI,YAAY,CAAC,gBAAgB,EAAEX,UAAU,CAACC,EAAE,CAAC;YACpDE,QAAQ,CAACS,IAAI,CAACC,WAAW,CAACN,MAAM,CAAC;YACjC,IAAIL,KAAK,EAAE;cAETY,cAAc,CAAC,MAAMZ,KAAK,CAACa,aAAa,EAAEC,WAAW,CAACd,KAAK,CAAC,CAAC;YAC/D;UACF;UACA;MACJ;MACA;IACF,KAAK,QAAQ;MACXrB,MAAM,CAACC,QAAQ,CAACa,MAAM,CAAC,CAAC;MACxB;IACF,KAAK,SAAS;MAEZ;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"script","externalDependencies":[]}